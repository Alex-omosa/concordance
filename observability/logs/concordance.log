warning: unused variable: `aggregate_name`
  --> concordance-derive/src/lib.rs:39:9
   |
39 |     let aggregate_name = extract_aggregate_name(&input.attrs)?;
   |         ^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_aggregate_name`
   |
   = note: `#[warn(unused_variables)]` on by default

warning: `concordance-derive` (lib) generated 1 warning
   Compiling concordance v0.1.0 (/home/alex-omosa/learn/concordance/concordance)
   Compiling user-app v0.1.0 (/home/alex-omosa/learn/concordance/examples/user-app)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 7.26s
     Running `/home/alex-omosa/learn/concordance/target/debug/worker`
{"timestamp":"2025-06-11T09:26:08.336824Z","level":"INFO","fields":{"message":"ðŸš€ Initializing Concordance Event Sourcing Framework"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.336991Z","level":"INFO","fields":{"message":"ðŸ“¡ NATS Configuration:"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.337025Z","level":"INFO","fields":{"message":"   URL: nats://127.0.0.1:4222"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.337065Z","level":"INFO","fields":{"message":"   JWT: not set"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.337105Z","level":"INFO","fields":{"message":"   Seed: not set"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.337132Z","level":"INFO","fields":{"message":"   JS Domain: default"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.337173Z","level":"INFO","fields":{"message":"ðŸŽ¯ Concordance initializing with 1 registered aggregates: [order]"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.337217Z","level":"INFO","fields":{"message":"ðŸ”Œ Connecting to NATS at: nats://127.0.0.1:4222"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.342481Z","level":"INFO","fields":{"message":"âœ… Successfully connected to NATS!"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.343099Z","level":"INFO","fields":{"message":"ðŸ”§ Ensuring required NATS streams exist..."},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.350122Z","level":"INFO","fields":{"message":"âœ… All required streams are ready!"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.350189Z","level":"INFO","fields":{"message":"âœ… Concordance provider initialized successfully!"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.351198Z","level":"INFO","fields":{"message":"ðŸ”§ Initializing NATS KV bucket: CC_STATE (with 3 retries)"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.351262Z","level":"DEBUG","fields":{"message":"Attempt 1 of 3 to get/create KV bucket"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.352705Z","level":"DEBUG","fields":{"message":"Bucket doesn't exist yet, will try to create: Error { kind: GetBucket, source: Some(Error { kind: JetStream(Error { code: 404, err_code: ErrorCode(10059), description: Some(\"stream not found\") }), source: None }) }"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.352818Z","level":"DEBUG","fields":{"message":"Creating KV bucket with simplified configuration for compatibility"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.356515Z","level":"INFO","fields":{"message":"âœ… Created KV bucket with minimal config"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.356585Z","level":"INFO","fields":{"message":"âœ… Created new KV bucket: CC_STATE"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.356616Z","level":"INFO","fields":{"message":"âœ… EntityState initialized with NATS KV bucket: CC_STATE"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.361016Z","level":"DEBUG","fields":{"message":"EntityState health check passed"},"target":"concordance::persistence","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.361114Z","level":"INFO","fields":{"message":"ðŸŽ¯ Starting workers for 1 registered aggregates: [order]"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.361231Z","level":"INFO","fields":{"message":"ðŸ”§ Starting worker for aggregate: order"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:26:08.361360Z","level":"INFO","fields":{"message":"ðŸ”§ Initializing NATS KV bucket: CC_STATE (with 3 retries)"},"target":"concordance::persistence","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:26:08.361402Z","level":"DEBUG","fields":{"message":"Attempt 1 of 3 to get/create KV bucket"},"target":"concordance::persistence","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:26:08.362279Z","level":"INFO","fields":{"message":"âœ… Worker started for aggregate: order"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.362339Z","level":"INFO","fields":{"message":"âœ… All workers started successfully!"},"target":"concordance","threadName":"main","threadId":"ThreadId(1)"}
{"timestamp":"2025-06-11T09:26:08.363419Z","level":"INFO","fields":{"message":"âœ… Using existing KV bucket: CC_STATE"},"target":"concordance::persistence","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:26:08.363469Z","level":"INFO","fields":{"message":"âœ… EntityState initialized with NATS KV bucket: CC_STATE"},"target":"concordance::persistence","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:26:08.363513Z","level":"INFO","fields":{"message":"Starting aggregate worker","worker.aggregate_name":"order","worker.consumer_name":"AGG_CMD_order","worker.filter_subject":"cc.commands.order"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:26:08.369194Z","level":"INFO","fields":{"message":"Worker ready to process commands","worker.aggregate_name":"order","worker.status":"ready"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:26:13.679870Z","level":"INFO","fields":{"message":"Operation started","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.680747Z","level":"DEBUG","fields":{"message":"Loading aggregate state","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","state.key":"order-001"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"persistence","name":"state.load"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"persistence","name":"state.load"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.684632Z","level":"DEBUG","fields":{"message":"No state found for agg.order.order-001"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"fetch_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"persistence","name":"state.load"},{"entity_name":"order","key":"order-001","name":"fetch_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.685681Z","level":"DEBUG","fields":{"message":"State loaded","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","state.exists":"false","state.size_bytes":"None"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.686831Z","level":"DEBUG","fields":{"message":"Dispatching command to aggregate","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","command.type":"create_order"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.688061Z","level":"DEBUG","fields":{"message":"Creating new order aggregate"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","state.exists":false,"name":"aggregate.from_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","state.exists":false,"name":"aggregate.from_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.689284Z","level":"DEBUG","fields":{"message":"Processing command","aggregate.status":"New"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.690231Z","level":"DEBUG","fields":{"message":"Command handled successfully","events.count":1,"events.types":"[\"order_created\"]"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.690852Z","level":"DEBUG","fields":{"message":"Applying event to aggregate","aggregate.status":"New"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","event.type":"order_created","name":"aggregate.apply_event"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","event.type":"order_created","name":"aggregate.apply_event"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.691618Z","level":"INFO","fields":{"message":"Order order-001 created with total $99.99 for customer Some(\"cust-123\")"},"target":"user_app::events","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","event.type":"order_created","name":"aggregate.apply_event"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","event.type":"order_created","name":"aggregate.apply_event"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.692372Z","level":"DEBUG","fields":{"message":"Event applied successfully","state.transition.from_status":"New","state.transition.to_status":"Created","state.transition.from_version":"0","state.transition.to_version":"1"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","event.type":"order_created","name":"aggregate.apply_event"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"0","event.type":"order_created","name":"aggregate.apply_event"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.693469Z","level":"DEBUG","fields":{"message":"Serialized aggregate state","state.size_bytes":144},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","name":"aggregate.to_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","name":"aggregate.to_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.694359Z","level":"DEBUG","fields":{"message":"Command handled by aggregate","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","events.count":"1","state.updated":"true"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.695119Z","level":"DEBUG","fields":{"message":"Event generated","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","aggregate.type":"order","aggregate.key":"order-001","event.type":"order_created","event.size_bytes":"130"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.695845Z","level":"DEBUG","fields":{"message":"Persisting aggregate state","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","state.size_bytes":"144"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"persistence","name":"state.persist"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"persistence","name":"state.persist"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.698779Z","level":"DEBUG","fields":{"message":"State written for agg.order.order-001 with revision 2"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"write_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"persistence","name":"state.persist"},{"entity_name":"order","key":"order-001","name":"write_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.699341Z","level":"DEBUG","fields":{"message":"State persisted","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","state.revision":"2"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.700242Z","level":"DEBUG","fields":{"message":"Publishing event","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","event.type":"order_created"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","event.type":"order_created","layer":"infrastructure","name":"event.publish"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","event.type":"order_created","layer":"infrastructure","name":"event.publish"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.701563Z","level":"DEBUG","fields":{"message":"Published event: order_created"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","event.type":"order_created","layer":"infrastructure","name":"event.publish"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","event.type":"order_created","layer":"infrastructure","name":"event.publish"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.702225Z","level":"DEBUG","fields":{"message":"NATS interaction","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","nats.operation":"publish","nats.subject":"cc.events.order_created"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","event.type":"order_created","layer":"infrastructure","name":"event.publish"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","event.type":"order_created","layer":"infrastructure","name":"event.publish"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.702778Z","level":"INFO","fields":{"message":"Operation metrics","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","metrics.total_duration_ms":"22","metrics.state_size_bytes":"None","metrics.events_generated":"1","metrics.total_event_size_bytes":"130"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.703261Z","level":"DEBUG","fields":{"message":"Phase timing","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","metrics.phase":"state_load","metrics.duration_ms":"5"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.703770Z","level":"DEBUG","fields":{"message":"Phase timing","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","metrics.phase":"command_handle","metrics.duration_ms":"8"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:13.704804Z","level":"INFO","fields":{"message":"Operation completed successfully","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order","duration_ms":"25","events.generated":"0"},"target":"concordance::observability","span":{"ack.success":"true","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"infrastructure","name":"nats.message.ack"},"spans":[{"ack.success":"true","correlation_id":"01656feb-ed2a-4ae3-80fb-700d590e2bb7","layer":"infrastructure","name":"nats.message.ack"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.281206Z","level":"INFO","fields":{"message":"Operation started","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.281439Z","level":"DEBUG","fields":{"message":"Loading aggregate state","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","state.key":"order-001"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"persistence","name":"state.load"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"persistence","name":"state.load"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.283104Z","level":"DEBUG","fields":{"message":"Found state for agg.order.order-001 (144 bytes)"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"fetch_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"persistence","name":"state.load"},{"entity_name":"order","key":"order-001","name":"fetch_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.283348Z","level":"DEBUG","fields":{"message":"State loaded","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","state.exists":"true","state.size_bytes":"Some(144)"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.283615Z","level":"DEBUG","fields":{"message":"Dispatching command to aggregate","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","command.type":"create_order"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.283859Z","level":"DEBUG","fields":{"message":"Deserializing order aggregate from state"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.284181Z","level":"DEBUG","fields":{"message":"Processing command","aggregate.status":"Created"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.284393Z","level":"ERROR","fields":{"message":"Command handling failed","error":"Order already exists"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.284679Z","level":"ERROR","fields":{"message":"Operation failed","correlation_id":"39c82d4b-16d1-483e-a8b0-9f35093942d7","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order","error":"Order already exists","duration_ms":"3"},"target":"concordance::observability","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.285704Z","level":"INFO","fields":{"message":"Operation started","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.286358Z","level":"DEBUG","fields":{"message":"Loading aggregate state","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","state.key":"order-001"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"persistence","name":"state.load"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"persistence","name":"state.load"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.288893Z","level":"DEBUG","fields":{"message":"Found state for agg.order.order-001 (144 bytes)"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"fetch_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"persistence","name":"state.load"},{"entity_name":"order","key":"order-001","name":"fetch_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.289260Z","level":"DEBUG","fields":{"message":"State loaded","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","state.exists":"true","state.size_bytes":"Some(144)"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.289948Z","level":"DEBUG","fields":{"message":"Dispatching command to aggregate","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","command.type":"create_order"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.290206Z","level":"DEBUG","fields":{"message":"Deserializing order aggregate from state"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.290516Z","level":"DEBUG","fields":{"message":"Processing command","aggregate.status":"Created"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.290712Z","level":"ERROR","fields":{"message":"Command handling failed","error":"Order already exists"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.290985Z","level":"ERROR","fields":{"message":"Operation failed","correlation_id":"d13527a0-544d-416a-88dd-f55a8cf33af2","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order","error":"Order already exists","duration_ms":"5"},"target":"concordance::observability","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.292384Z","level":"INFO","fields":{"message":"Operation started","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.292661Z","level":"DEBUG","fields":{"message":"Loading aggregate state","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","state.key":"order-001"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"persistence","name":"state.load"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"persistence","name":"state.load"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.294352Z","level":"DEBUG","fields":{"message":"Found state for agg.order.order-001 (144 bytes)"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"fetch_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"persistence","name":"state.load"},{"entity_name":"order","key":"order-001","name":"fetch_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.294804Z","level":"DEBUG","fields":{"message":"State loaded","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","state.exists":"true","state.size_bytes":"Some(144)"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.295147Z","level":"DEBUG","fields":{"message":"Dispatching command to aggregate","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","command.type":"create_order"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.295440Z","level":"DEBUG","fields":{"message":"Deserializing order aggregate from state"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.295778Z","level":"DEBUG","fields":{"message":"Processing command","aggregate.status":"Created"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.296094Z","level":"ERROR","fields":{"message":"Command handling failed","error":"Order already exists"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"create_order","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"create_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:21.296409Z","level":"ERROR","fields":{"message":"Operation failed","correlation_id":"a097c1a9-835b-475a-97a7-b8c9829ef002","aggregate.type":"order","aggregate.key":"order-001","operation.type":"create_order","error":"Order already exists","duration_ms":"4"},"target":"concordance::observability","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:26:55.215385Z","level":"INFO","fields":{"message":"Operation started","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","aggregate.type":"order","aggregate.key":"order-001","operation.type":"cancel_order"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.216136Z","level":"DEBUG","fields":{"message":"Loading aggregate state","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","state.key":"order-001"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"persistence","name":"state.load"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"persistence","name":"state.load"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.219045Z","level":"DEBUG","fields":{"message":"Found state for agg.order.order-001 (144 bytes)"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"fetch_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"persistence","name":"state.load"},{"entity_name":"order","key":"order-001","name":"fetch_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.219802Z","level":"DEBUG","fields":{"message":"State loaded","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","state.exists":"true","state.size_bytes":"Some(144)"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.220410Z","level":"DEBUG","fields":{"message":"Dispatching command to aggregate","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","command.type":"cancel_order"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.220878Z","level":"DEBUG","fields":{"message":"Deserializing order aggregate from state"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.221623Z","level":"DEBUG","fields":{"message":"Processing command","aggregate.status":"Created"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.222455Z","level":"ERROR","fields":{"message":"Command handling failed","error":"Invalid cancel_order payload: missing field `reason` at line 1 column 95"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.223277Z","level":"ERROR","fields":{"message":"Operation failed","correlation_id":"2202e30a-4610-440a-ac8d-0898311562be","aggregate.type":"order","aggregate.key":"order-001","operation.type":"cancel_order","error":"Invalid cancel_order payload: missing field `reason` at line 1 column 95","duration_ms":"8"},"target":"concordance::observability","threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.225523Z","level":"INFO","fields":{"message":"Operation started","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","aggregate.type":"order","aggregate.key":"order-001","operation.type":"cancel_order"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.225889Z","level":"DEBUG","fields":{"message":"Loading aggregate state","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","state.key":"order-001"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"persistence","name":"state.load"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"persistence","name":"state.load"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.229012Z","level":"DEBUG","fields":{"message":"Found state for agg.order.order-001 (144 bytes)"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"fetch_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"persistence","name":"state.load"},{"entity_name":"order","key":"order-001","name":"fetch_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.229857Z","level":"DEBUG","fields":{"message":"State loaded","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","state.exists":"true","state.size_bytes":"Some(144)"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.230630Z","level":"DEBUG","fields":{"message":"Dispatching command to aggregate","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","command.type":"cancel_order"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.231377Z","level":"DEBUG","fields":{"message":"Deserializing order aggregate from state"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.232289Z","level":"DEBUG","fields":{"message":"Processing command","aggregate.status":"Created"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.232963Z","level":"ERROR","fields":{"message":"Command handling failed","error":"Invalid cancel_order payload: missing field `reason` at line 1 column 95"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.233928Z","level":"ERROR","fields":{"message":"Operation failed","correlation_id":"61e04ccd-4fa7-4017-b82a-cef8779ca220","aggregate.type":"order","aggregate.key":"order-001","operation.type":"cancel_order","error":"Invalid cancel_order payload: missing field `reason` at line 1 column 95","duration_ms":"8"},"target":"concordance::observability","threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.236380Z","level":"INFO","fields":{"message":"Operation started","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","aggregate.type":"order","aggregate.key":"order-001","operation.type":"cancel_order"},"target":"concordance::observability","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.237334Z","level":"DEBUG","fields":{"message":"Loading aggregate state","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","state.key":"order-001"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"persistence","name":"state.load"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"persistence","name":"state.load"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.240479Z","level":"DEBUG","fields":{"message":"Found state for agg.order.order-001 (144 bytes)"},"target":"concordance::persistence","span":{"entity_name":"order","key":"order-001","name":"fetch_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"persistence","name":"state.load"},{"entity_name":"order","key":"order-001","name":"fetch_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.241118Z","level":"DEBUG","fields":{"message":"State loaded","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","state.exists":"true","state.size_bytes":"Some(144)"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.241813Z","level":"DEBUG","fields":{"message":"Dispatching command to aggregate","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","command.type":"cancel_order"},"target":"concordance","span":{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"domain","name":"domain.command.handle"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"domain","name":"domain.command.handle"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.242456Z","level":"DEBUG","fields":{"message":"Deserializing order aggregate from state"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","state.exists":true,"state.size_bytes":144,"name":"aggregate.from_state"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.243332Z","level":"DEBUG","fields":{"message":"Processing command","aggregate.status":"Created"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.244207Z","level":"ERROR","fields":{"message":"Command handling failed","error":"Invalid cancel_order payload: missing field `reason` at line 1 column 95"},"target":"user_app","span":{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"},"spans":[{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"worker","name":"worker.command.processing"},{"aggregate.key":"order-001","aggregate.type":"order","command.type":"cancel_order","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","layer":"domain","name":"domain.command.handle"},{"aggregate.key":"order-001","aggregate.type":"order","aggregate.version":"1","command.type":"cancel_order","name":"aggregate.handle_command"}],"threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:26:55.245054Z","level":"ERROR","fields":{"message":"Operation failed","correlation_id":"8cb8cf80-b595-4157-96ed-281395d3ea26","aggregate.type":"order","aggregate.key":"order-001","operation.type":"cancel_order","error":"Invalid cancel_order payload: missing field `reason` at line 1 column 95","duration_ms":"8"},"target":"concordance::observability","threadName":"tokio-runtime-worker","threadId":"ThreadId(3)"}
{"timestamp":"2025-06-11T09:30:17.573485Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(6)"}
{"timestamp":"2025-06-11T09:30:47.677354Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:31:17.780501Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:31:47.883184Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:32:17.985706Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:32:48.088772Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:33:18.191440Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:33:48.294643Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:34:18.398080Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:34:48.500156Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:35:18.603361Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:35:48.706084Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:36:18.807875Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:36:48.912329Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:37:19.015715Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:37:49.119841Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:38:19.221979Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:38:49.324549Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:39:19.428116Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:39:49.530770Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:40:19.634466Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:40:49.737714Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:41:19.841443Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:41:49.944750Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:42:20.048692Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:42:50.154256Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:43:20.258602Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T09:43:50.362205Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
{"timestamp":"2025-06-11T12:50:41.625822Z","level":"ERROR","fields":{"message":"Error receiving message from NATS","worker.aggregate_name":"order","error":"missed idle heartbeat"},"target":"concordance","threadName":"tokio-runtime-worker","threadId":"ThreadId(8)"}
